<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Activity</title>
    <link rel="stylesheet" href="/css/activityDesign.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>

<header>
    <div class="headContainer">
        <div id="logoSection">
            <a href="login.html" id="logoLink">
                <img src="/cheeses/slice.svg" height="50px" id="logo">
            </a>
            <div id="pageTitle">
                <a href="login.html" id="nameLink">Űrsajtnet</a>
            </div>
        </div>
    </div>
</header>
<div id="mainLogo">
    <div id="mainText">
        <h1 id="űrsajtActivity">Űrsajt activity generátor</h1>
        <p id="űrsajtActivitysub">Induljon a játék! Oszd meg legelvetemültebb ötleteid, és sorsolj az Űrsajt hálózatáról</p>
    </div>
</div>
<div id="mainContent">
    <div id="inputContainer">
        <form id="card" name="fm" spellcheck="false">
            <input type="text" placeholder="Activity ötlet helye (maximum 35 karakter)"
                   name="activityName" id="idea" autocomplete="off" >
            <button type="button" id="submitActivity" onclick="submitCard()">Elküld</button>
        </form>
    </div>
    <div id="contentHolder">
        <div id="content"></div>
    </div>
    <div id="bottomContent">
        <button type="button" id="getCard" onclick="getContent()">Sorsolás</button>
        <div id="warning">*Kisorsolás után az ötlet törlődik a listáról</div>
    </div>
    <div id="comment">
        <img src="/activityElements/robot.svg" id="robot">
        <div id="commentHolder"></div>
    </div>
</div>



<script>
    function submitCard(){
        $.ajax({
            url: '/activityget',
            type : "POST",
            data : $("#card").serialize(),
            statusCode: {
                200: function() {
                    alert("Hozzáadva az adatbázishoz");
                },
                406: function() {
                    alert("Túl rövid :,(");
                },
                413: function () {
                    alert("Túl hosszú :O");
                },
                503: function(){
                    alert("Ez a szó már szerepel az adatbázisban")
                }
            }
        });
        document.fm.reset();

        }
    function getContent() {
        $.when($.ajax(firstContent())).then(function () {
            secondContent();
        });
    }

    function firstContent(){
        $("#content").load("/getCard");
    }
    function secondContent(){
        $("#commentHolder").load("/getComment");
    }

    document.addEventListener('click', function(e){
        if(document.activeElement.toString() == '[object HTMLButtonElement]'){ document.activeElement.blur(); } });
</script>
</body>
</html>